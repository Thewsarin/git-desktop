<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ระบบบริหารจัดการแจ้งซ่อมและบริการด้าน IT - โรงพยาบาลอินทร์บุรี</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap');
        
        * {
            font-family: 'Sarabun', sans-serif;
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .status-badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: 500;
        }
        
        .status-pending {
            background-color: #FEF3C7;
            color: #92400E;
        }
        
        .status-in-progress {
            background-color: #DBEAFE;
            color: #1E40AF;
        }
        
        .status-completed {
            background-color: #D1FAE5;
            color: #065F46;
        }
        
        .sidebar-link {
            transition: all 0.2s;
        }
        
        .sidebar-link:hover {
            background-color: #EFF6FF;
            border-left: 4px solid #3B82F6;
        }
        
        .sidebar-link.active {
            background-color: #DBEAFE;
            border-left: 4px solid #2563EB;
            color: #1E40AF;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Login Page -->
    <div id="loginPage" class="page active">
        <div class="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-500 to-blue-700 px-4">
            <div class="max-w-md w-full bg-white rounded-2xl shadow-2xl p-8 fade-in">
                <div class="text-center mb-8">
                    <div class="inline-flex items-center justify-center w-20 h-20 bg-blue-100 rounded-full mb-4">
                        <i class="fas fa-hospital text-blue-600 text-3xl"></i>
                    </div>
                    <h1 class="text-3xl font-bold text-gray-800 mb-2">ระบบแจ้งซ่อม IT</h1>
                    <p class="text-gray-600">โรงพยาบาลอินทร์บุรี</p>
                </div>
                
                <form id="loginForm" class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ชื่อผู้ใช้</label>
                        <div class="relative">
                            <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                                <i class="fas fa-user text-gray-400"></i>
                            </span>
                            <input type="text" id="loginUsername" class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="กรอกชื่อผู้ใช้" required>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">รหัสผ่าน</label>
                        <div class="relative">
                            <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                                <i class="fas fa-lock text-gray-400"></i>
                            </span>
                            <input type="password" id="loginPassword" class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="กรอกรหัสผ่าน" required>
                        </div>
                    </div>
                    
                    <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition duration-200 shadow-lg hover:shadow-xl">
                        <i class="fas fa-sign-in-alt mr-2"></i>เข้าสู่ระบบ
                    </button>
                </form>
                
                <div class="mt-6 text-center">
                    <p class="text-gray-600">ยังไม่มีบัญชี? <button onclick="showPage('registerPage')" class="text-blue-600 font-medium hover:underline">ลงทะเบียน</button></p>
                </div>
                
                <div class="mt-8 pt-6 border-t border-gray-200">
                    <p class="text-sm text-gray-500 text-center">ทดสอบระบบ:</p>
                    <div class="mt-2 space-y-1 text-xs text-gray-600">
                        <p><strong>Admin:</strong> admin / admin123</p>
                        <p><strong>เจ้าหน้าที่ IT:</strong> it_staff / it123</p>
                        <p><strong>บุคลากร:</strong> user / user123</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Page -->
    <div id="registerPage" class="page">
        <div class="min-h-screen flex items-center justify-center bg-gradient-to-br from-green-500 to-green-700 px-4 py-8">
            <div class="max-w-2xl w-full bg-white rounded-2xl shadow-2xl p-8 fade-in">
                <div class="text-center mb-8">
                    <div class="inline-flex items-center justify-center w-20 h-20 bg-green-100 rounded-full mb-4">
                        <i class="fas fa-user-plus text-green-600 text-3xl"></i>
                    </div>
                    <h1 class="text-3xl font-bold text-gray-800 mb-2">ลงทะเบียนผู้ใช้งาน</h1>
                    <p class="text-gray-600">กรอกข้อมูลเพื่อสร้างบัญชีใหม่</p>
                </div>
                
                <form id="registerForm" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ชื่อผู้ใช้ *</label>
                            <input type="text" id="regUsername" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" required>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">รหัสผ่าน *</label>
                            <input type="password" id="regPassword" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" required>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ชื่อ-นามสกุล *</label>
                            <input type="text" id="regName" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" required>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">เบอร์โทรศัพท์ *</label>
                            <input type="tel" id="regTel" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" required>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">อีเมล *</label>
                            <input type="email" id="regEmail" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" required>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">หน่วยงาน *</label>
                            <select id="regDepartment" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent" required>
                                <option value="">เลือกหน่วยงาน</option>
                                <option value="1">แผนกผู้ป่วยนอก</option>
                                <option value="2">แผนกผู้ป่วยใน</option>
                                <option value="3">แผนกฉุกเฉิน</option>
                                <option value="4">แผนกเภสัชกรรม</option>
                                <option value="5">แผนกเทคโนโลยีสารสนเทศ</option>
                                <option value="6">แผนกบริหาร</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="flex gap-4">
                        <button type="button" onclick="showPage('loginPage')" class="flex-1 bg-gray-200 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-300 transition duration-200">
                            <i class="fas fa-arrow-left mr-2"></i>ย้อนกลับ
                        </button>
                        <button type="submit" class="flex-1 bg-green-600 text-white py-3 rounded-lg font-medium hover:bg-green-700 transition duration-200 shadow-lg hover:shadow-xl">
                            <i class="fas fa-check mr-2"></i>ลงทะเบียน
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Main Application (After Login) -->
    <div id="mainApp" class="page">
        <!-- Navigation Bar -->
        <nav class="bg-white shadow-lg sticky top-0 z-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <div class="flex items-center">
                        <i class="fas fa-hospital text-blue-600 text-2xl mr-3"></i>
                        <div>
                            <h1 class="text-xl font-bold text-gray-800">ระบบแจ้งซ่อม IT</h1>
                            <p class="text-xs text-gray-500">โรงพยาบาลอินทร์บุรี</p>
                        </div>
                    </div>
                    
                    <div class="flex items-center space-x-4">
                        <div class="text-right hidden sm:block">
                            <p class="text-sm font-medium text-gray-800" id="userDisplayName">ผู้ใช้งาน</p>
                            <p class="text-xs text-gray-500" id="userRole">บทบาท</p>
                        </div>
                        <button onclick="logout()" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition duration-200">
                            <i class="fas fa-sign-out-alt mr-2"></i>ออกจากระบบ
                        </button>
                    </div>
                </div>
            </div>
        </nav>

        <div class="flex">
            <!-- Sidebar -->
            <aside class="w-64 bg-white shadow-lg min-h-screen sticky top-16">
                <nav class="p-4 space-y-2">
                    <button onclick="showSection('dashboard')" class="sidebar-link active w-full text-left px-4 py-3 rounded-lg flex items-center" data-section="dashboard">
                        <i class="fas fa-home w-6"></i>
                        <span class="ml-3">หน้าหลัก</span>
                    </button>
                    
                    <button onclick="showSection('newRequest')" class="sidebar-link w-full text-left px-4 py-3 rounded-lg flex items-center" data-section="newRequest">
                        <i class="fas fa-plus-circle w-6"></i>
                        <span class="ml-3">แจ้งซ่อม</span>
                    </button>
                    
                    <button onclick="showSection('trackStatus')" class="sidebar-link w-full text-left px-4 py-3 rounded-lg flex items-center" data-section="trackStatus">
                        <i class="fas fa-tasks w-6"></i>
                        <span class="ml-3">ติดตามสถานะ</span>
                    </button>
                    
                    <button onclick="showSection('history')" class="sidebar-link w-full text-left px-4 py-3 rounded-lg flex items-center" data-section="history">
                        <i class="fas fa-history w-6"></i>
                        <span class="ml-3">ประวัติการแจ้งซ่อม</span>
                    </button>
                    
                    <div id="adminMenu" style="display: none;">
                        <hr class="my-4">
                        <p class="px-4 text-xs font-semibold text-gray-500 uppercase mb-2">เมนูผู้ดูแลระบบ</p>
                        
                        <button onclick="showSection('adminDashboard')" class="sidebar-link w-full text-left px-4 py-3 rounded-lg flex items-center" data-section="adminDashboard">
                            <i class="fas fa-chart-line w-6"></i>
                            <span class="ml-3">แดชบอร์ด</span>
                        </button>
                        
                        <button onclick="showSection('manageUsers')" class="sidebar-link w-full text-left px-4 py-3 rounded-lg flex items-center" data-section="manageUsers">
                            <i class="fas fa-users w-6"></i>
                            <span class="ml-3">จัดการผู้ใช้</span>
                        </button>
                        
                        <button onclick="showSection('manageEquipment')" class="sidebar-link w-full text-left px-4 py-3 rounded-lg flex items-center" data-section="manageEquipment">
                            <i class="fas fa-laptop w-6"></i>
                            <span class="ml-3">จัดการครุภัณฑ์</span>
                        </button>
                    </div>
                </nav>
            </aside>

            <!-- Main Content -->
            <main class="flex-1 p-8">
                <!-- Dashboard Section -->
                <div id="dashboard" class="section active fade-in">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6">หน้าหลัก</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div class="bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-blue-100 text-sm mb-1">รอดำเนินการ</p>
                                    <p class="text-4xl font-bold" id="pendingCount">0</p>
                                </div>
                                <i class="fas fa-clock text-5xl text-blue-200 opacity-50"></i>
                            </div>
                        </div>
                        
                        <div class="bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl shadow-lg p-6 text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-yellow-100 text-sm mb-1">กำลังดำเนินการ</p>
                                    <p class="text-4xl font-bold" id="inProgressCount">0</p>
                                </div>
                                <i class="fas fa-cog fa-spin text-5xl text-yellow-200 opacity-50"></i>
                            </div>
                        </div>
                        
                        <div class="bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg p-6 text-white">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-green-100 text-sm mb-1">เสร็จสิ้น</p>
                                    <p class="text-4xl font-bold" id="completedCount">0</p>
                                </div>
                                <i class="fas fa-check-circle text-5xl text-green-200 opacity-50"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">รายการแจ้งซ่อมล่าสุด</h3>
                        <div id="recentRequests" class="space-y-4">
                            <p class="text-gray-500 text-center py-8">ยังไม่มีรายการแจ้งซ่อม</p>
                        </div>
                    </div>
                </div>

                <!-- New Request Section -->
                <div id="newRequest" class="section fade-in" style="display: none;">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6">แจ้งซ่อมอุปกรณ์</h2>
                    
                    <div class="bg-white rounded-xl shadow-lg p-8">
                        <form id="requestForm" class="space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ประเภทอุปกรณ์ *</label>
                                    <select id="equipmentType" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                                        <option value="">เลือกประเภทอุปกรณ์</option>
                                        <option value="คอมพิวเตอร์">คอมพิวเตอร์</option>
                                        <option value="เครื่องพิมพ์">เครื่องพิมพ์</option>
                                        <option value="เครือข่าย">เครือข่าย</option>
                                        <option value="โปรแกรม">โปรแกรม</option>
                                        <option value="อื่นๆ">อื่นๆ</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">หมายเลขครุภัณฑ์</label>
                                    <input type="text" id="assetNo" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ถ้ามี">
                                </div>
                                
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">หัวข้อ *</label>
                                    <input type="text" id="requestSubject" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="สรุปปัญหาโดยย่อ" required>
                                </div>
                                
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">รายละเอียดปัญหา *</label>
                                    <textarea id="requestDetail" rows="5" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="อธิบายปัญหาที่พบโดยละเอียด" required></textarea>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ระดับความเร่งด่วน *</label>
                                    <select id="priority" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                                        <option value="ปกติ">ปกติ</option>
                                        <option value="ด่วน">ด่วน</option>
                                        <option value="ด่วนมาก">ด่วนมาก</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">สถานที่</label>
                                    <input type="text" id="location" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ระบุสถานที่ติดตั้งอุปกรณ์">
                                </div>
                            </div>
                            
                            <div class="flex gap-4 pt-4">
                                <button type="button" onclick="document.getElementById('requestForm').reset()" class="flex-1 bg-gray-200 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-300 transition duration-200">
                                    <i class="fas fa-redo mr-2"></i>ล้างข้อมูล
                                </button>
                                <button type="submit" class="flex-1 bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition duration-200 shadow-lg hover:shadow-xl">
                                    <i class="fas fa-paper-plane mr-2"></i>ส่งคำขอ
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Track Status Section -->
                <div id="trackStatus" class="section fade-in" style="display: none;">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6">ติดตามสถานะการแจ้งซ่อม</h2>
                    
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <div class="mb-6 flex flex-wrap gap-4">
                            <select id="statusFilter" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                <option value="">ทุกสถานะ</option>
                                <option value="รอรับงาน">รอรับงาน</option>
                                <option value="กำลังดำเนินการ">กำลังดำเนินการ</option>
                                <option value="เสร็จสิ้น">เสร็จสิ้น</option>
                            </select>
                            
                            <input type="text" id="searchRequest" class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="ค้นหาด้วยหัวข้อหรือรายละเอียด...">
                            
                            <button onclick="filterRequests()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition duration-200">
                                <i class="fas fa-search mr-2"></i>ค้นหา
                            </button>
                        </div>
                        
                        <div id="requestsList" class="space-y-4">
                            <p class="text-gray-500 text-center py-8">ไม่พบรายการแจ้งซ่อม</p>
                        </div>
                    </div>
                </div>

                <!-- History Section -->
                <div id="history" class="section fade-in" style="display: none;">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6">ประวัติการแจ้งซ่อม</h2>
                    
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50 border-b border-gray-200">
                                    <tr>
                                        <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase">รหัส</th>
                                        <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase">วันที่แจ้ง</th>
                                        <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase">หัวข้อ</th>
                                        <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase">ประเภท</th>
                                        <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase">สถานะ</th>
                                        <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase">ดำเนินการ</th>
                                    </tr>
                                </thead>
                                <tbody id="historyTableBody" class="divide-y divide-gray-200">
                                    <tr>
                                        <td colspan="6" class="px-6 py-8 text-center text-gray-500">ไม่มีประวัติการแจ้งซ่อม</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Admin Dashboard Section -->
                <div id="adminDashboard" class="section fade-in" style="display: none;">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6">แดชบอร์ดผู้ดูแลระบบ</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-gray-600 text-sm font-medium">ผู้ใช้ทั้งหมด</h3>
                                <i class="fas fa-users text-blue-500 text-2xl"></i>
                            </div>
                            <p class="text-3xl font-bold text-gray-800" id="totalUsers">0</p>
                        </div>
                        
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-gray-600 text-sm font-medium">คำขอทั้งหมด</h3>
                                <i class="fas fa-clipboard-list text-green-500 text-2xl"></i>
                            </div>
                            <p class="text-3xl font-bold text-gray-800" id="totalRequests">0</p>
                        </div>
                        
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-gray-600 text-sm font-medium">ครุภัณฑ์</h3>
                                <i class="fas fa-laptop text-purple-500 text-2xl"></i>
                            </div>
                            <p class="text-3xl font-bold text-gray-800" id="totalEquipment">0</p>
                        </div>
                        
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-gray-600 text-sm font-medium">เวลาเฉลี่ย (ชม.)</h3>
                                <i class="fas fa-clock text-orange-500 text-2xl"></i>
                            </div>
                            <p class="text-3xl font-bold text-gray-800" id="avgTime">0</p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <h3 class="text-xl font-bold text-gray-800 mb-4">สถิติตามประเภทอุปกรณ์</h3>
                            <div id="equipmentStats" class="space-y-3">
                                <!-- Stats will be populated here -->
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <h3 class="text-xl font-bold text-gray-800 mb-4">ประสิทธิภาพเจ้าหน้าที่</h3>
                            <div id="staffPerformance" class="space-y-3">
                                <!-- Performance will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Manage Users Section -->
                <div id="manageUsers" class="section fade-in" style="display: none;">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6">จัดการผู้ใช้งาน</h2>
                    
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <div class="mb-6">
                            <button onclick="showAddUserModal()" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition duration-200">
                                <i class="fas fa-plus mr-2"></i>เพิ่มผู้ใช้ใหม่
                            </button>
                        </div>
                        
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50 border-b border-gray-200">
                                    <tr>
                                        <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase">ชื่อผู้ใช้</th>
                                        <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase">ชื่อ-นามสกุล</th>
                                        <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase">บทบาท</th>
                                        <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase">หน่วยงาน</th>
                                        <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase">จัดการ</th>
                                    </tr>
                                </thead>
                                <tbody id="usersTableBody" class="divide-y divide-gray-200">
                                    <!-- Users will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Manage Equipment Section -->
                <div id="manageEquipment" class="section fade-in" style="display: none;">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6">จัดการครุภัณฑ์</h2>
                    
                    <div class="bg-white rounded-xl shadow-lg p-6">
                        <div class="mb-6">
                            <button onclick="showAddEquipmentModal()" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition duration-200">
                                <i class="fas fa-plus mr-2"></i>เพิ่มครุภัณฑ์ใหม่
                            </button>
                        </div>
                        
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50 border-b border-gray-200">
                                    <tr>
                                        <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase">หมายเลขครุภัณฑ์</th>
                                        <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase">ชื่ออุปกรณ์</th>
                                        <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase">ประเภท</th>
                                        <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase">หน่วยงาน</th>
                                        <th class="px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase">จัดการ</th>
                                    </tr>
                                </thead>
                                <tbody id="equipmentTableBody" class="divide-y divide-gray-200">
                                    <!-- Equipment will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script>
        // Initialize data storage
        let currentUser = null;
        let users = [];
        let requests = [];
        let equipment = [];
        let departments = [
            { id: 1, name: 'แผนกผู้ป่วยนอก' },
            { id: 2, name: 'แผนกผู้ป่วยใน' },
            { id: 3, name: 'แผนกฉุกเฉิน' },
            { id: 4, name: 'แผนกเภสัชกรรม' },
            { id: 5, name: 'แผนกเทคโนโลยีสารสนเทศ' },
            { id: 6, name: 'แผนกบริหาร' }
        ];

        // Initialize demo data
        function initializeDemoData() {
            // Demo users
            users = [
                { id: 1, username: 'admin', password: 'admin123', name: 'ผู้ดูแลระบบ', role: 'admin', department: 5, tel: '081-234-5678', email: 'admin@hospital.com' },
                { id: 2, username: 'it_staff', password: 'it123', name: 'สมชาย ใจดี', role: 'it', department: 5, tel: '081-234-5679', email: 'it@hospital.com' },
                { id: 3, username: 'user', password: 'user123', name: 'สมหญิง รักงาน', role: 'user', department: 1, tel: '081-234-5680', email: 'user@hospital.com' }
            ];

            // Demo equipment
            equipment = [
                { id: 1, assetNo: 'PC-001', name: 'คอมพิวเตอร์ตั้งโต๊ะ Dell', type: 'คอมพิวเตอร์', department: 1 },
                { id: 2, assetNo: 'PR-001', name: 'เครื่องพิมพ์ HP LaserJet', type: 'เครื่องพิมพ์', department: 1 },
                { id: 3, assetNo: 'PC-002', name: 'คอมพิวเตอร์ตั้งโต๊ะ Lenovo', type: 'คอมพิวเตอร์', department: 2 }
            ];

            // Demo requests
            requests = [
                {
                    id: 1,
                    userId: 3,
                    equipmentType: 'คอมพิวเตอร์',
                    assetNo: 'PC-001',
                    subject: 'คอมพิวเตอร์เปิดไม่ติด',
                    detail: 'กดปุ่มเปิดแล้วไม่มีอะไรเกิดขึ้น ไฟไม่ติด',
                    priority: 'ด่วน',
                    location: 'ห้องตรวจ 1',
                    status: 'รอรับงาน',
                    date: new Date().toISOString(),
                    assignedTo: null
                },
                {
                    id: 2,
                    userId: 3,
                    equipmentType: 'เครื่องพิมพ์',
                    assetNo: 'PR-001',
                    subject: 'เครื่องพิมพ์ติดกระดาษ',
                    detail: 'กระดาษติดข้างในเครื่อง ดึงออกไม่ได้',
                    priority: 'ปกติ',
                    location: 'ห้องพยาบาล',
                    status: 'กำลังดำเนินการ',
                    date: new Date(Date.now() - 86400000).toISOString(),
                    assignedTo: 2
                }
            ];

            saveToLocalStorage();
        }

        // Local storage functions
        function saveToLocalStorage() {
            localStorage.setItem('users', JSON.stringify(users));
            localStorage.setItem('requests', JSON.stringify(requests));
            localStorage.setItem('equipment', JSON.stringify(equipment));
        }

        function loadFromLocalStorage() {
            const savedUsers = localStorage.getItem('users');
            const savedRequests = localStorage.getItem('requests');
            const savedEquipment = localStorage.getItem('equipment');

            if (savedUsers) users = JSON.parse(savedUsers);
            if (savedRequests) requests = JSON.parse(savedRequests);
            if (savedEquipment) equipment = JSON.parse(savedEquipment);

            if (users.length === 0) {
                initializeDemoData();
            }
        }

        // Page navigation
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
        }

        // Section navigation
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.style.display = 'none';
            });
            document.getElementById(sectionId).style.display = 'block';

            document.querySelectorAll('.sidebar-link').forEach(link => {
                link.classList.remove('active');
            });
            document.querySelector(`[data-section="${sectionId}"]`).classList.add('active');

            // Load data for specific sections
            if (sectionId === 'trackStatus') {
                loadRequestsList();
            } else if (sectionId === 'history') {
                loadHistoryTable();
            } else if (sectionId === 'adminDashboard') {
                loadAdminDashboard();
            } else if (sectionId === 'manageUsers') {
                loadUsersTable();
            } else if (sectionId === 'manageEquipment') {
                loadEquipmentTable();
            }
        }

        // Login
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;

            const user = users.find(u => u.username === username && u.password === password);

            if (user) {
                currentUser = user;
                document.getElementById('userDisplayName').textContent = user.name;
                
                let roleText = '';
                if (user.role === 'admin') roleText = 'ผู้ดูแลระบบ';
                else if (user.role === 'it') roleText = 'เจ้าหน้าที่ IT';
                else roleText = 'บุคลากร';
                
                document.getElementById('userRole').textContent = roleText;

                if (user.role === 'admin' || user.role === 'it') {
                    document.getElementById('adminMenu').style.display = 'block';
                }

                showPage('mainApp');
                updateDashboard();
                loadRecentRequests();
            } else {
                alert('ชื่อผู้ใช้หรือรหัสผ่านไม่ถูกต้อง');
            }
        });

        // Register
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const newUser = {
                id: users.length + 1,
                username: document.getElementById('regUsername').value,
                password: document.getElementById('regPassword').value,
                name: document.getElementById('regName').value,
                tel: document.getElementById('regTel').value,
                email: document.getElementById('regEmail').value,
                department: parseInt(document.getElementById('regDepartment').value),
                role: 'user'
            };

            if (users.find(u => u.username === newUser.username)) {
                alert('ชื่อผู้ใช้นี้มีอยู่ในระบบแล้ว');
                return;
            }

            users.push(newUser);
            saveToLocalStorage();
            alert('ลงทะเบียนสำเร็จ! กรุณาเข้าสู่ระบบ');
            showPage('loginPage');
            document.getElementById('registerForm').reset();
        });

        // Logout
        function logout() {
            if (confirm('ต้องการออกจากระบบหรือไม่?')) {
                currentUser = null;
                document.getElementById('adminMenu').style.display = 'none';
                showPage('loginPage');
            }
        }

        // Submit request
        document.getElementById('requestForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const newRequest = {
                id: requests.length + 1,
                userId: currentUser.id,
                equipmentType: document.getElementById('equipmentType').value,
                assetNo: document.getElementById('assetNo').value,
                subject: document.getElementById('requestSubject').value,
                detail: document.getElementById('requestDetail').value,
                priority: document.getElementById('priority').value,
                location: document.getElementById('location').value,
                status: 'รอรับงาน',
                date: new Date().toISOString(),
                assignedTo: null
            };

            requests.push(newRequest);
            saveToLocalStorage();
            alert('ส่งคำขอแจ้งซ่อมเรียบร้อยแล้ว');
            document.getElementById('requestForm').reset();
            updateDashboard();
            loadRecentRequests();
        });

        // Update dashboard
        function updateDashboard() {
            const userRequests = currentUser.role === 'user' 
                ? requests.filter(r => r.userId === currentUser.id)
                : requests;

            const pending = userRequests.filter(r => r.status === 'รอรับงาน').length;
            const inProgress = userRequests.filter(r => r.status === 'กำลังดำเนินการ').length;
            const completed = userRequests.filter(r => r.status === 'เสร็จสิ้น').length;

            document.getElementById('pendingCount').textContent = pending;
            document.getElementById('inProgressCount').textContent = inProgress;
            document.getElementById('completedCount').textContent = completed;
        }

        // Load recent requests
        function loadRecentRequests() {
            const userRequests = currentUser.role === 'user' 
                ? requests.filter(r => r.userId === currentUser.id)
                : requests;

            const recentRequests = userRequests.slice(-5).reverse();
            const container = document.getElementById('recentRequests');

            if (recentRequests.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-8">ยังไม่มีรายการแจ้งซ่อม</p>';
                return;
            }

            container.innerHTML = recentRequests.map(req => {
                const user = users.find(u => u.id === req.userId);
                const statusClass = req.status === 'รอรับงาน' ? 'status-pending' : 
                                   req.status === 'กำลังดำเนินการ' ? 'status-in-progress' : 'status-completed';
                
                return `
                    <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition duration-200">
                        <div class="flex justify-between items-start mb-2">
                            <h4 class="font-semibold text-gray-800">${req.subject}</h4>
                            <span class="status-badge ${statusClass}">${req.status}</span>
                        </div>
                        <p class="text-sm text-gray-600 mb-2">${req.detail.substring(0, 100)}...</p>
                        <div class="flex justify-between items-center text-xs text-gray-500">
                            <span><i class="fas fa-user mr-1"></i>${user.name}</span>
                            <span><i class="fas fa-calendar mr-1"></i>${new Date(req.date).toLocaleDateString('th-TH')}</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Load requests list
        function loadRequestsList() {
            const userRequests = currentUser.role === 'user' 
                ? requests.filter(r => r.userId === currentUser.id)
                : requests;

            const container = document.getElementById('requestsList');

            if (userRequests.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-8">ไม่พบรายการแจ้งซ่อม</p>';
                return;
            }

            container.innerHTML = userRequests.reverse().map(req => {
                const user = users.find(u => u.id === req.userId);
                const statusClass = req.status === 'รอรับงาน' ? 'status-pending' : 
                                   req.status === 'กำลังดำเนินการ' ? 'status-in-progress' : 'status-completed';
                
                return `
                    <div class="border border-gray-200 rounded-lg p-6 hover:shadow-lg transition duration-200">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h4 class="text-lg font-bold text-gray-800 mb-1">${req.subject}</h4>
                                <p class="text-sm text-gray-500">รหัส: REQ-${String(req.id).padStart(4, '0')}</p>
                            </div>
                            <span class="status-badge ${statusClass}">${req.status}</span>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4 mb-4 text-sm">
                            <div>
                                <span class="text-gray-600">ประเภท:</span>
                                <span class="font-medium ml-2">${req.equipmentType}</span>
                            </div>
                            <div>
                                <span class="text-gray-600">ความเร่งด่วน:</span>
                                <span class="font-medium ml-2">${req.priority}</span>
                            </div>
                            <div>
                                <span class="text-gray-600">ผู้แจ้ง:</span>
                                <span class="font-medium ml-2">${user.name}</span>
                            </div>
                            <div>
                                <span class="text-gray-600">วันที่แจ้ง:</span>
                                <span class="font-medium ml-2">${new Date(req.date).toLocaleDateString('th-TH')}</span>
                            </div>
                        </div>
                        
                        <p class="text-gray-700 mb-4">${req.detail}</p>
                        
                        ${currentUser.role !== 'user' ? `
                            <div class="flex gap-2">
                                <button onclick="updateRequestStatus(${req.id}, 'กำลังดำเนินการ')" class="flex-1 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition duration-200">
                                    <i class="fas fa-play mr-2"></i>เริ่มดำเนินการ
                                </button>
                                <button onclick="updateRequestStatus(${req.id}, 'เสร็จสิ้น')" class="flex-1 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition duration-200">
                                    <i class="fas fa-check mr-2"></i>ปิดงาน
                                </button>
                            </div>
                        ` : ''}
                    </div>
                `;
            }).join('');
        }

        // Update request status
        function updateRequestStatus(requestId, newStatus) {
            const request = requests.find(r => r.id === requestId);
            if (request) {
                request.status = newStatus;
                if (newStatus === 'กำลังดำเนินการ' && !request.assignedTo) {
                    request.assignedTo = currentUser.id;
                }
                saveToLocalStorage();
                loadRequestsList();
                updateDashboard();
                loadRecentRequests();
                alert(`อัพเดตสถานะเป็น "${newStatus}" เรียบร้อยแล้ว`);
            }
        }

        // Filter requests
        function filterRequests() {
            const statusFilter = document.getElementById('statusFilter').value;
            const searchText = document.getElementById('searchRequest').value.toLowerCase();

            let filtered = currentUser.role === 'user' 
                ? requests.filter(r => r.userId === currentUser.id)
                : requests;

            if (statusFilter) {
                filtered = filtered.filter(r => r.status === statusFilter);
            }

            if (searchText) {
                filtered = filtered.filter(r => 
                    r.subject.toLowerCase().includes(searchText) || 
                    r.detail.toLowerCase().includes(searchText)
                );
            }

            const container = document.getElementById('requestsList');

            if (filtered.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-8">ไม่พบรายการที่ค้นหา</p>';
                return;
            }

            container.innerHTML = filtered.reverse().map(req => {
                const user = users.find(u => u.id === req.userId);
                const statusClass = req.status === 'รอรับงาน' ? 'status-pending' : 
                                   req.status === 'กำลังดำเนินการ' ? 'status-in-progress' : 'status-completed';
                
                return `
                    <div class="border border-gray-200 rounded-lg p-6 hover:shadow-lg transition duration-200">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h4 class="text-lg font-bold text-gray-800 mb-1">${req.subject}</h4>
                                <p class="text-sm text-gray-500">รหัส: REQ-${String(req.id).padStart(4, '0')}</p>
                            </div>
                            <span class="status-badge ${statusClass}">${req.status}</span>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4 mb-4 text-sm">
                            <div>
                                <span class="text-gray-600">ประเภท:</span>
                                <span class="font-medium ml-2">${req.equipmentType}</span>
                            </div>
                            <div>
                                <span class="text-gray-600">ความเร่งด่วน:</span>
                                <span class="font-medium ml-2">${req.priority}</span>
                            </div>
                            <div>
                                <span class="text-gray-600">ผู้แจ้ง:</span>
                                <span class="font-medium ml-2">${user.name}</span>
                            </div>
                            <div>
                                <span class="text-gray-600">วันที่แจ้ง:</span>
                                <span class="font-medium ml-2">${new Date(req.date).toLocaleDateString('th-TH')}</span>
                            </div>
                        </div>
                        
                        <p class="text-gray-700 mb-4">${req.detail}</p>
                    </div>
                `;
            }).join('');
        }

        // Load history table
        function loadHistoryTable() {
            const userRequests = currentUser.role === 'user' 
                ? requests.filter(r => r.userId === currentUser.id)
                : requests;

            const tbody = document.getElementById('historyTableBody');

            if (userRequests.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6" class="px-6 py-8 text-center text-gray-500">ไม่มีประวัติการแจ้งซ่อม</td></tr>';
                return;
            }

            tbody.innerHTML = userRequests.reverse().map(req => {
                const statusClass = req.status === 'รอรับงาน' ? 'status-pending' : 
                                   req.status === 'กำลังดำเนินการ' ? 'status-in-progress' : 'status-completed';
                
                return `
                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 text-sm">REQ-${String(req.id).padStart(4, '0')}</td>
                        <td class="px-6 py-4 text-sm">${new Date(req.date).toLocaleDateString('th-TH')}</td>
                        <td class="px-6 py-4 text-sm font-medium">${req.subject}</td>
                        <td class="px-6 py-4 text-sm">${req.equipmentType}</td>
                        <td class="px-6 py-4"><span class="status-badge ${statusClass}">${req.status}</span></td>
                        <td class="px-6 py-4">
                            <button onclick="viewRequestDetail(${req.id})" class="text-blue-600 hover:text-blue-800">
                                <i class="fas fa-eye"></i>
                            </button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        // View request detail
        function viewRequestDetail(requestId) {
            const request = requests.find(r => r.id === requestId);
            if (request) {
                const user = users.find(u => u.id === request.userId);
                alert(`รายละเอียดคำขอ\n\nรหัส: REQ-${String(request.id).padStart(4, '0')}\nหัวข้อ: ${request.subject}\nรายละเอียด: ${request.detail}\nผู้แจ้ง: ${user.name}\nสถานะ: ${request.status}`);
            }
        }

        // Load admin dashboard
        function loadAdminDashboard() {
            document.getElementById('totalUsers').textContent = users.length;
            document.getElementById('totalRequests').textContent = requests.length;
            document.getElementById('totalEquipment').textContent = equipment.length;
            
            // Calculate average time (mock data)
            document.getElementById('avgTime').textContent = '4.5';

            // Equipment stats
            const equipmentTypes = {};
            requests.forEach(req => {
                equipmentTypes[req.equipmentType] = (equipmentTypes[req.equipmentType] || 0) + 1;
            });

            const equipmentStatsHtml = Object.entries(equipmentTypes).map(([type, count]) => {
                const percentage = (count / requests.length * 100).toFixed(1);
                return `
                    <div>
                        <div class="flex justify-between mb-1">
                            <span class="text-sm font-medium text-gray-700">${type}</span>
                            <span class="text-sm text-gray-600">${count} รายการ (${percentage}%)</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-blue-600 h-2 rounded-full" style="width: ${percentage}%"></div>
                        </div>
                    </div>
                `;
            }).join('');

            document.getElementById('equipmentStats').innerHTML = equipmentStatsHtml || '<p class="text-gray-500">ไม่มีข้อมูล</p>';

            // Staff performance
            const itStaff = users.filter(u => u.role === 'it' || u.role === 'admin');
            const performanceHtml = itStaff.map(staff => {
                const assignedRequests = requests.filter(r => r.assignedTo === staff.id);
                const completedRequests = assignedRequests.filter(r => r.status === 'เสร็จสิ้น');
                const completionRate = assignedRequests.length > 0 
                    ? (completedRequests.length / assignedRequests.length * 100).toFixed(1)
                    : 0;

                return `
                    <div>
                        <div class="flex justify-between mb-1">
                            <span class="text-sm font-medium text-gray-700">${staff.name}</span>
                            <span class="text-sm text-gray-600">${completedRequests.length}/${assignedRequests.length} (${completionRate}%)</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-green-600 h-2 rounded-full" style="width: ${completionRate}%"></div>
                        </div>
                    </div>
                `;
            }).join('');

            document.getElementById('staffPerformance').innerHTML = performanceHtml || '<p class="text-gray-500">ไม่มีข้อมูล</p>';
        }

        // Load users table
        function loadUsersTable() {
            const tbody = document.getElementById('usersTableBody');
            
            tbody.innerHTML = users.map(user => {
                const dept = departments.find(d => d.id === user.department);
                const roleText = user.role === 'admin' ? 'ผู้ดูแลระบบ' : 
                                user.role === 'it' ? 'เจ้าหน้าที่ IT' : 'บุคลากร';
                
                return `
                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 text-sm">${user.username}</td>
                        <td class="px-6 py-4 text-sm">${user.name}</td>
                        <td class="px-6 py-4 text-sm">${roleText}</td>
                        <td class="px-6 py-4 text-sm">${dept ? dept.name : '-'}</td>
                        <td class="px-6 py-4">
                            <button onclick="editUser(${user.id})" class="text-blue-600 hover:text-blue-800 mr-3">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button onclick="deleteUser(${user.id})" class="text-red-600 hover:text-red-800">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        // Load equipment table
        function loadEquipmentTable() {
            const tbody = document.getElementById('equipmentTableBody');
            
            tbody.innerHTML = equipment.map(eq => {
                const dept = departments.find(d => d.id === eq.department);
                
                return `
                    <tr class="hover:bg-gray-50">
                        <td class="px-6 py-4 text-sm">${eq.assetNo}</td>
                        <td class="px-6 py-4 text-sm">${eq.name}</td>
                        <td class="px-6 py-4 text-sm">${eq.type}</td>
                        <td class="px-6 py-4 text-sm">${dept ? dept.name : '-'}</td>
                        <td class="px-6 py-4">
                            <button onclick="editEquipment(${eq.id})" class="text-blue-600 hover:text-blue-800 mr-3">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button onclick="deleteEquipment(${eq.id})" class="text-red-600 hover:text-red-800">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        // Placeholder functions for modals
        function showAddUserModal() {
            alert('ฟังก์ชันเพิ่มผู้ใช้ (ในระบบจริงจะเป็น Modal)');
        }

        function editUser(userId) {
            alert(`แก้ไขผู้ใช้ ID: ${userId}`);
        }

        function deleteUser(userId) {
            if (confirm('ต้องการลบผู้ใช้นี้หรือไม่?')) {
                users = users.filter(u => u.id !== userId);
                saveToLocalStorage();
                loadUsersTable();
            }
        }

        function showAddEquipmentModal() {
            alert('ฟังก์ชันเพิ่มครุภัณฑ์ (ในระบบจริงจะเป็น Modal)');
        }

        function editEquipment(equipmentId) {
            alert(`แก้ไขครุภัณฑ์ ID: ${equipmentId}`);
        }

        function deleteEquipment(equipmentId) {
            if (confirm('ต้องการลบครุภัณฑ์นี้หรือไม่?')) {
                equipment = equipment.filter(e => e.id !== equipmentId);
                saveToLocalStorage();
                loadEquipmentTable();
            }
        }

        // Initialize on page load
        window.addEventListener('DOMContentLoaded', function() {
            loadFromLocalStorage();
        });
    </script>
</body>
</html>